<!--
  Generated template for the ProcessPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-grid [ngClass]="'img'+currentIndex">
    <ion-row>
      <ion-col col-3> 產品來源</ion-col>
      <ion-col col-3>掃描Code</ion-col>
      <ion-col col-3>核對包裝</ion-col>
      <ion-col col-3>完成查詢</ion-col>
    </ion-row>
  </ion-grid>
  <ion-navbar *ngIf="view == '2.3'">
    <ion-buttons icon-only clear left>
      <button ion-button (tap)="changeView('2.1')">
        <ion-icon name="arrow-back" large></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>
      <span *ngIf="packageType == '5mg'">Cialis 5mg Package Authentication Guide</span>
      <span *ngIf="packageType == '20mg'">Cialis 20mg Package Authentication Guide</span>
    </ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding no-bounce>

  <ion-slides (ionSlideDidChange)="slideChanged()" [ngClass]="{'slide0':currentIndex == 0, 'slide-any': currentIndex !=0}">
    <ion-slide>
      <ion-list no-lines class="slide0-margin">
        <ion-list-header no-lines>
          Cialis purchased from :
        </ion-list-header>
        
        <ion-item no-lines (tap)="purchaseFrom = 'HOSPITAL'">
          <ion-avatar item-start>
            <img [src]="purchaseFrom == 'HOSPITAL' ? 'assets/imgs/redio-button-click.png' : 'assets/imgs/redio-button-unclick.png'">
          </ion-avatar>
          <ion-label fixed>
            <span>Hospital</span>
          </ion-label>
          <ion-input (focus)="focusit('HOSPITAL')" [(ngModel)]="purchaseFromDetail.HOSPITAL" type="text" placeholder="Please enter the name of the establishment (optional)"></ion-input>
        </ion-item>
        <ion-item no-lines (tap)="purchaseFrom = 'PHARMACY'">
          <ion-avatar item-start>
            <img [src]="purchaseFrom == 'PHARMACY' ? 'assets/imgs/redio-button-click.png' : 'assets/imgs/redio-button-unclick.png'">
          </ion-avatar>
          <ion-label fixed>
            <span>Pharmacy</span>
          </ion-label>
          <ion-input (focus)="focusit('PHARMACY')" [(ngModel)]="purchaseFromDetail.PHARMACY" type="text" placeholder="Please enter the name of the establishment (optional)"></ion-input>
        </ion-item>
        <ion-item no-lines (tap)="purchaseFrom = 'OTHER'">
          <ion-avatar item-start>
            <img [src]="purchaseFrom == 'OTHER' ? 'assets/imgs/redio-button-click.png' : 'assets/imgs/redio-button-unclick.png'">
          </ion-avatar>
          <ion-label fixed>
            <span>Other</span>
          </ion-label>
          <ion-input (focus)="focusit('OTHER')" [(ngModel)]="purchaseFromDetail.OTHER" type="text" placeholder="Please enter the name of the establishment (optional)"></ion-input>
        </ion-item>
        
      </ion-list>

      <div class="noticeBtn">
        Notice!
        <br>Cialis is not distributed and sold in online shops.
      </div>
    </ion-slide>

    <ion-slide>
      <section *ngIf="view == '1.1'">
        <alert-view [text]="'Barcode Scanning in progress...'" [buttonText]="' '"></alert-view>
      </section>
      <section *ngIf="view == '1.2'">
        <!-- <alert-view [text]="'One moment…<br>System Validation In Progress…'" [buttonText]="'OK'" (buttonClick)="changeView('1.s')"></alert-view> -->
        <alert-view [text]="'One moment…<br>System Validation In Progress…'"></alert-view>
      </section>
      <section *ngIf="view == '1.s'">
        <alert-view [text]="'Code Validated!<br>Proceed to next step…'" [buttonText]="'OK'" (buttonClick)="nextSlide()"></alert-view>

      </section>
      <section *ngIf="view == '1.e'">
        <alert-view [text]="'Product authentication failed.<br> 
          Kindly contact numbers below to report the counterfeit product.<br>         
          Please contact support center during normal office hours: 0809-009-369<br> 
          Or Toll-free Number 0800-285-000'" [buttonText]="'OK'" (buttonClick)="resetValidation()"></alert-view>

      </section>
      <section *ngIf="view == '1.ee'">
        <alert-view [text]="'System encountered some error while validating.<br> 
          Please contact support center during normal office hours: 0809-009-369<br> 
          Or Toll-free Number 0800-285-000'" [buttonText]="'OK'" (buttonClick)="resetValidation()"></alert-view>
      </section>
    </ion-slide>

    <ion-slide>
      <section *ngIf="view == '2.1'">
        <ion-list radio-group [(ngModel)]="packageType" no-lines>
          <ion-list-header no-lines>
            Choose the type of Cialis packaging for further validation:
          </ion-list-header>

          <ion-item no-lines (click)="packageType = '5mg'" no-lines>
            <ion-avatar item-start>
              <img [src]="packageType == '5mg' ? 'assets/imgs/redio-button-click.png' : 'assets/imgs/redio-button-unclick.png'">
            </ion-avatar>
            <ion-label>
              <span>Cialis 5mg</span>
            </ion-label>
          </ion-item>

          <ion-item no-lines (click)="packageType = '20mg'" no-lines>
            <ion-avatar item-start>
              <img [src]="packageType == '20mg' ? 'assets/imgs/redio-button-click.png' : 'assets/imgs/redio-button-unclick.png'">
            </ion-avatar>
            <ion-label>
              <span>Cialis 20mg</span>
            </ion-label>
          </ion-item>
        </ion-list>
        <!-- <div (click)="changeView('2.2')" class="noticeBtn" tappable>
          Next
        </div> -->
      </section>

      <section *ngIf="view == '2.2'">
        <alert-view [text]="'Please follow the product validation image guide presented to verify the packaging.'" [buttonText]="'OK'"
          (buttonClick)="getImg(packageType)"></alert-view>
      </section>

      <section *ngIf="view == '2.3'">
        <div class="medImg">
        <img [src]="medImgURL">
          </div>
        <div class="noticeBtn" tappable >
          Notice!
          <br> Cialis is not distributed and sold in online shops.
        </div>
      </section>
      <section *ngIf="view == '2.4'">
        <ion-list no-lines>
          <ion-list-header no-lines>
            Package verification result:
          </ion-list-header>

          <ion-item no-lines (click)="verificationResult = 'ALL'">
            <ion-avatar item-start>
              <img [src]="verificationResult == 'ALL' ? 'assets/imgs/redio-button-click.png' : 'assets/imgs/redio-button-unclick.png'">
            </ion-avatar>
            <ion-label>
              <span>All checkpoint passed</span>
            </ion-label>
          </ion-item>

          <ion-item no-lines (click)="verificationResult = 'SOME'">
            <ion-avatar item-start>
              <img [src]="verificationResult == 'SOME' ? 'assets/imgs/redio-button-click.png' : 'assets/imgs/redio-button-unclick.png'">
            </ion-avatar>
            <ion-label>
              <span>Some didn’t match correctly</span>
            </ion-label>
          </ion-item>

          <ion-item no-lines (click)="verificationResult = 'NOT_SURE'">
            <ion-avatar item-start>
              <img [src]="verificationResult == 'NOT_SURE' ? 'assets/imgs/redio-button-click.png' : 'assets/imgs/redio-button-unclick.png'">
            </ion-avatar>
            <ion-label>
              <span>Not sure if the package validation matches the guide </span>
            </ion-label>
          </ion-item>
        </ion-list>
        <!-- <div (click)="verificationCheck(verificationResult)" class="noticeBtn">
          Next
        </div> -->
      </section>
      <section *ngIf="view == '2.6'">
          <alert-view [text]="'Please contact the call center during working hours to help you validate the product. 
          <br>0809-009-369</br>'" [buttonText]="'OK'"
            (buttonClick)="this.nextSlide()"></alert-view>
        </section>
      <section *ngIf="view == '2.5'">
        <alert-view [text]="'Authentication Passed.!<br>Product is confirmed to be distributed by Lilly Taiwan.'" [buttonText]="'OK'"
          (buttonClick)="this.nextSlide()"></alert-view>
      </section>
    </ion-slide>

    <ion-slide>
      <section *ngIf="view == '3.1'">
        <alert-view [text]="'Sending data to server..'" [buttonText]="' '"></alert-view>
      </section>
      <section *ngIf="view == '3.s'">
        <alert-view [text]="'Validation details send for record keeping. '" [buttonText]="'Validate next product'" (buttonClick)="resetValidation()"></alert-view>
      </section>
      <section *ngIf="view == '3.e'">
        <alert-view [text]="'Validation details send Error'" [buttonText]="'Validate next product'" (buttonClick)="resetValidation()"></alert-view>
      </section>

    </ion-slide>

  </ion-slides>

  <!-- <ion-fab right bottom >
      <span style="color:white;">選單</span>
        <img ion-fab src="assets/imgs/menu.png">
        <ion-fab-list side="top">
          <span >Terms of Use</span>
          <span (click)="contact()">Contact information</span>
        </ion-fab-list>
      </ion-fab> -->
  <!-- <fab-ion *ngIf="view == '2.1' || view == '2.4'"></fab-ion> -->
  <!-- <div class="btnIcon" *ngIf="view == '2.1' || view == '2.4'">
    <img src="assets/imgs/menu.png">
  </div> -->
</ion-content>

<ion-footer *ngIf="!isKeyboardOpen" no-border>
  <ion-item no-lines>
    <ion-thumbnail item-start>
      <img src="assets/imgs/lilly-logo.png">
    </ion-thumbnail>
    <ion-grid>
      <ion-row>
        <ion-col col-7>
          <p> 聯絡我們\n歡迎您寶貴的意見, 禮來公司關心您的健康。台北市復興北路365號11樓\n電話： (02)27152950</p>
        </ion-col>
        <ion-col class="nextBtn" (click)="nextSlide()" *ngIf=" currentIndex == 0 && purchaseFrom != '' " >
          <span>下一個</span>
          <div class="nextIcon"></div>
        </ion-col>
        <ion-col class="nextBtn" (click)="changeView('2.2')" *ngIf="view == '2.1' && packageType != '' ">
          <span>下一個</span>
          <div class="nextIcon"></div>
        </ion-col>
        <ion-col class="nextBtn" (click)="changeView('2.4')" *ngIf="view == '2.3'">
          <span>下一個</span>
          <div class="nextIcon"></div>
        </ion-col>
        <ion-col class="nextBtn" (click)="verificationCheck(verificationResult)" *ngIf="view == '2.4' && verificationResult !=''">
          <span>下一個</span>
          <div class="nextIcon"></div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>
</ion-footer>